<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Application Settings</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Same CSS theme -->
    <style>
        /* --- CSS Styles (Keep as is from previous steps) --- */
        :root {
            --main-bg-color: #0c0c3a; --font-main-color: #fff; --font-dimmed-color: #8d95ae; --delimiter-color: hsla(0, 0%, 100%, .1);
            --window-bg-color: #0f2055; --dropdown-bg-color: #11316b; --dropdown-bg-hover: #1d3b72; --profile-widget-avatar: #11316b;
            --window-border-color: hsla(0, 0%, 100%, .3); --bordered-input-bg: hsla(0, 0%, 100%, .1); --row-header-bg: #154d91;
            --button-bordered-hover: hsla(0, 0%, 100%, .1); --alert-bg: #233467; --switch-bg-color: #0f2055; --switch-bg-hover: #273666;
            --dimmed-btn-bg: hsla(0, 0%, 100%, .1); --dimmed-btn-hover: hsla(0, 0%, 100%, .3); --font-faded-color: hsla(0, 0%, 100%, .5);
            --slider-bg-color: #1d3b72; --blur-color: hsla(0, 0%, 100%, .05); --icon-bg-color: #0f1f54; --swap-btn-bg: rgba(31, 143, 235, .1);
            --advices-bg-color: hsla(0, 0%, 100%, .1); --messenger-top-bg: #0f2055; --messenger-bottom-bg: #273666; --messenger-bg: #0f2055;
            --messenger-border: hsla(0, 0%, 100%, .1); --message-bg: hsla(0, 0%, 100%, .1); --custom-message-bg: transparent;
            --trade-table-tooltip: #1d3b72; --dex-offer-notification: #0f2055; --dex-panel-bg: #0f2055; --dex-panel-tooltip: #273666;
            --dex-buy-sell-border: #ffffff1a; --dex-input-currency: #39497c; --footer-selected-link: #ffffffcc; --table-th-color: #ffffffb2;
            --table-thead-bg: #24244e; --table-tbody-bg: #101040; --admin-table-border-color: #596f98;
            --buy-color: #16d1d6; --sell-color: #ff6767; --link-color: #1f8feb; --link-hover-color: #4ca5ef;
            --bs-primary-rgb: 31, 143, 235; --bs-primary: var(--link-color);
        }
        *, *::before, *::after { padding:0; margin:0; border:0; outline:0; box-sizing:border-box; transition:all .3s; background-clip:border-box; -webkit-tap-highlight-color: rgba(0,0,0,0); }
        body { background-color: var(--main-bg-color); color:#fff; font-family:'Inter',sans-serif; font-size:16px; line-height:1.6; }
        .container, .container-fluid { max-width: 1800px; padding: 40px 20px 80px; }
        @media (min-width:1200px){ .container, .container-fluid{ padding:40px 60px 80px; } }
        a { color: var(--link-color); text-decoration:none; } a:hover { color: var(--link-hover-color); text-decoration:underline; }
        h1,h2,h3,h4,h5,h6 { color: var(--font-main-color); font-weight:600; margin:0 0 1rem; }
        .text-muted { color: var(--font-dimmed-color) !important; }

        .card { color:#fff; background-color:var(--window-bg-color); border:1px solid var(--window-border-color); border-radius:15px; margin-bottom:30px; box-shadow:0 4px 15px rgba(0,0,0,.1); }
        .card-header { background:transparent; border-bottom:1px solid var(--delimiter-color); font-weight:600; font-size:1.1em; padding:1rem 1.5rem; border-top-left-radius:15px; border-top-right-radius:15px; }
        .card-body { padding:1.5rem; }
        .card-footer { background:transparent; border-top:1px solid var(--delimiter-color); padding:1rem 1.5rem; border-bottom-left-radius:15px; border-bottom-right-radius:15px; }

        .table { --bs-table-bg:transparent; --bs-table-border-color:var(--delimiter-color); --bs-table-striped-bg:rgba(255,255,255,.03); --bs-table-hover-bg:var(--dropdown-bg-hover); color:var(--font-main-color); border-collapse:separate; border-spacing:0; margin-bottom:0; }
        .table th, .table td { padding:.8rem 1rem; vertical-align:middle; font-size:.95em; border-bottom:1px solid var(--delimiter-color); color: #FFF; }
        .table thead th { color:var(--table-th-color); background-color:var(--table-thead-bg); font-weight:600; }
        .table-hover tbody tr:hover td { background-color: var(--dropdown-bg-hover); }

        .badge { padding:.3em .6em; font-size:.8em; font-weight:700; border-radius:5px; }
        .badge.bg-success { color:var(--buy-color); border:1px solid var(--buy-color); background:transparent !important; }
        .badge.bg-danger { color:var(--sell-color); border:1px solid var(--sell-color); background:transparent !important; }

        /* Section rows inside the table */
        .table-section-row td { background: var(--row-header-bg); color:#fff; font-weight:600; border-bottom-color: var(--delimiter-color); }

        /* Input aesthetics to match theme */
        .form-control { background-color: var(--bordered-input-bg); color: var(--font-main-color); border: 1px solid var(--window-border-color); }
        .form-control:focus { background-color: var(--bordered-input-bg); color: var(--font-main-color); border-color: var(--link-color); box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25); }
        .form-check-input { background-color: var(--switch-bg-color); border-color: var(--window-border-color); }
        .form-check-input:checked { background-color: var(--link-color); border-color: var(--link-color); }
        .form-check-input:hover { background-color: var(--switch-bg-hover); }

        .settings-sticky-footer { position: sticky; bottom: 0; z-index: 5; }
    </style>
</head>
<body>

<div class="container-fluid">
    <h2 class="mb-3">Application Settings</h2>
    <a href="/" class="btn btn-sm btn-outline-primary">
        <i class="bi bi-gear"></i> Go back to dashboard
    </a>

    <form id="app-settings-form" class="card" autocomplete="off">
        <div class="card-header d-flex justify-content-between align-items-center">
            <span>Configure app behavior</span>
            <small id="settings-status" class="text-muted">Loadingâ€¦</small>
        </div>

        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead>
                    <tr>
                        <th style="width: 340px;">Setting</th>
                        <th>Value</th>
                    </tr>
                    </thead>
                    <tbody id="settings-tbody">
                    <!-- Rows injected by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card-footer d-flex justify-content-between align-items-center settings-sticky-footer">
            <div>
                <span id="unsaved-pill" class="badge bg-danger d-none"><i class="bi bi-exclamation-circle"></i> Unsaved changes</span>
            </div>
            <div class="d-flex gap-2">
                <a href="/" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-gear"></i> Go back to dashboard
                </a>
                <button type="button" id="btn-refresh" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-clockwise"></i> Refresh
                </button>
                <button type="submit" id="btn-save" class="btn btn-primary">
                    <i class="bi bi-save"></i> Save
                </button>
            </div>
        </div>
    </form>

    <!-- Save result -->
    <div id="save-alert" class="alert mt-3 d-none" role="alert"
         style="background-color: var(--alert-bg); color: var(--font-main-color); border: 1px solid var(--window-border-color);">
        <!-- message injected by JS -->
    </div>
</div>

<!-- jQuery / Bootstrap -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

<script src="/js/settings.js"></script>
</body>
</html>